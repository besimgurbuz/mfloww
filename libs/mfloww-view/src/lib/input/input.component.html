<div class="relative w-full" *transloco="let t">
  <p
    class="input-label text-xs text-mfloww_fg pb-1"
    [style.opacity]="_value ? 100 : 0"
  >
    {{ label }}
  </p>
  <div class="relative">
    <input
      [type]="type"
      [placeholder]="placeholder"
      [autocomplete]="autocomplete"
      class="bg-mfloww_bg w-full text-sm border-solid border-2 rounded border-mfloww_white px-3 py-2 outline-none focus:border-mfloww_blue text-ellipsis overflow-hidden whitespace-nowrap"
      [value]="_value"
      [disabled]="_disabled"
      [ngClass]="{
        '!border-mfloww_fatal': _dirty && _control.errors,
        'text-mfloww_fg border-mfloww_fg': _disabled
      }"
      [class.!border-mfloww_fatal]="_formGroupSubmittedWithErrors | async"
      (input)="onValueChanged($any($event.target).value)"
      (click)="_focused = true"
    />
    <button
      *ngIf="copyable"
      class="absolute right-2 top-0 bottom-0 m-auto h-fit w-fit text-[10px] rounded p-1 bg-mfloww_fg"
      type="button"
      [ngClass]="{ 'text-mfloww_success': _copied }"
      [mflowwViewCopyClipboard]="_value"
      (copied)="informCopyEvent()"
    >
      {{ t(_copied ? 'Input.Copied' : 'Input.Copy') }}
    </button>
  </div>
  <ng-container *ngIf="_dirty && _control.errors">
    <p
      *ngIf="(_control.errors | keyvalue)[0] as firstError"
      class="absolute text-mfloww_fatal text-[10px]"
    >
      {{
        t(errorMessages[firstError.key], {
          name: label || placeholder || name,
          requiredLength: firstError.value?.requiredLength
        })
      }}
    </p>
  </ng-container>
</div>
